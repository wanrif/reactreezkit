# Copilot Instructions

## Project Architecture

This is a **React TypeScript application** using:

- **TanStack Router** for file-based routing with auto-generated route tree
- **TanStack Form** for type-safe form management with validation
- **Vite** for development and build tooling with SWC for React
- **Tailwind CSS v4** with Vite plugin integration and custom theming
- **Class Variance Authority (CVA)** for component variant management
- **Zod** for schema validation
- **Zustand** for state management (ready to use)
- **Oxlint** for fast linting instead of ESLint

## Key Patterns & Conventions

### Routing Structure

- File-based routing in `src/routes/` generates `routeTree.gen.ts` automatically
- Layout routes use underscore prefix: `_app.tsx` (main app), `_auth.tsx` (auth pages)
- Route files export `Route = createFileRoute('/path')({ component })` pattern
- Router type registration in `main.tsx` enables full TypeScript support

### Component Architecture (Atomic Design)

```
src/components/
├── atoms/       # Basic UI (Button, Input, Field)
├── molecules/   # Form components (LoginForm)
├── organisms/   # Complex sections (Navbar, Footer)
└── layouts/     # Page layouts (MainLayout, AuthLayout)
```

**Critical Pattern**: Use CVA for component variants:

```tsx
const buttonVariants = cva('base-classes', {
  variants: { variant: { solid: '...', ghost: '...' } },
  defaultVariants: { variant: 'solid' },
})
```

### Form Handling

- **TanStack Form** with Zod validation (see `LoginForm.tsx`)
- Field components use controlled pattern with `onChange={(value) => ...}`
- Form validation on both `onChange` and `onBlur`
- Schema definitions in `src/lib/validations/`

### Styling & Dark Mode

- **Tailwind v4** with custom dark mode variant: `@custom-variant dark (&:where(.dark, .dark *))`
- Use `cn()` utility from `@lib/utils` for conditional classes
- Dark mode classes: `dark:bg-gray-800`, `dark:text-gray-100` etc.
- Custom font: Sofia Sans from Bunny Fonts

### Import & Path Structure

- **Path aliases**: `@/`, `@components/`, `@lib/`, `@styles/`, `@stores/`
- **Barrel exports**: All folders have `index.ts` for clean imports
- **Import order**: React → 3rd party → local (`@/`) → relative

## Development Workflow

```bash
bun dev          # Vite dev server
bun build        # TypeScript build + Vite production build
bun lint         # Oxlint (fast alternative to ESLint)
bun lint:fix     # Auto-fix lint issues
bun format       # Prettier with import sorting + Tailwind class sorting
```

## TypeScript Configuration

- **Project references**: `tsconfig.app.json` (src/) + `tsconfig.node.json` (config)
- **Strict mode** with `noUnusedLocals` and `noUnusedParameters`
- **Path mapping** in both tsconfig files for clean imports

## Critical Files & Auto-Generation

- **`src/routeTree.gen.ts`**: Auto-generated by TanStack Router - never edit manually
- **`vite.config.ts`**: TanStack Router plugin with `autoCodeSplitting: true`
- **`src/main.tsx`**: Router setup with type registration for TypeScript safety
- **`.oxlintrc.json`**: Comprehensive linting rules replacing ESLint

## Adding Features

1. **New routes**: Create in `src/routes/` → route tree updates automatically
2. **Components**: Follow atomic design + use CVA for variants
3. **Forms**: Use TanStack Form + Zod schemas in `src/lib/validations/`
4. **Layouts**: `_app` for authenticated, `_auth` for login/signup flows
5. **State**: Zustand store files in `src/stores/`

## Integration Patterns

- **Forms**: `<form.Field name="email" children={(field) => <Field {...field} />} />`
- **Navigation**: `<Link to="/path" className="[&.active]:font-bold">` for active states
- **Loading states**: Button component has built-in `loading` prop with spinner
- **Validation**: Zod schemas with TanStack Form's `validators: { onChange, onBlur }`
